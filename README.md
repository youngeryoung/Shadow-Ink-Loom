# Shadow-Ink Loom (墨影织坊)

> **“鵼鸟织就黑白，为现实重构墨迹。”**

**Shadow-Ink Loom** 是一款专为 **PCB 丝印设计**、**电子墨水屏（E-Ink）渲染** 及 **激光雕刻** 打造的高精度图像处理工具。

它不仅仅是将图片转为黑白，而是通过 **混合抖动算法（Hybrid Dithering）** 与 **物理尺寸映射**，确保你的图像在转化为实物（如电路板上的丝印图案）时，既能保留丰富的灰度纹理，又能拥有清晰锐利的边缘轮廓。

---

##  核心闪光点 

### 1. 独创的“轮廓增强型”抖动算法
传统的二值化容易丢失边缘，普通的抖动（Dithering）又容易模糊轮廓。Shadow-Ink Loom 采用了一套组合拳：
*   **Floyd-Steinberg 抖动**：完美还原图像的灰度过渡，适合人像、风景等复杂图案。
*   **动态轮廓重绘**：利用 Canny 边缘检测提取矢量级轮廓，并强制叠加在抖动层之上。
*   **效果**：**既有细腻的阴影，又有刀刻般锋利的线条**，完美适配 PCB 丝印工艺对清晰度的要求。

### 2. 面向“制造”的工程级精度控制
告别盲目的像素调整，直接以 **物理尺寸（毫米/mm）** 对话。
*   **自动分辨率计算**：只需输入目标物理尺寸（如高 80mm）和工艺精度（如 JLCPCB 常用的 0.15mm/px），软件自动计算最佳像素分辨率。
*   **所见即所得**：生成的图片尺寸直接对应工厂生产要求，防止因分辨率不足导致的丝印糊成一团。

### 3. Numba JIT 极速渲染
后端集成了 `Numba` 编译器支持。
*   检测到 Numba 时自动启用 **JIT（即时编译）加速**。
*   将 Python 的循环计算转化为机器码，处理大尺寸高清图像时的抖动计算速度提升数倍，以此实现丝滑的实时预览体验。

### 4. 智能防呆与交互
*   **Lanczos4 高质量缩放**：在处理尺寸变化时使用业界顶级的重采样算法，杜绝锯齿。
*   **文件名即参数**：自动生成包含尺寸信息的文件名（如 `logo_80.00x60.00mm_dither.png`），方便作为 Gerber 文件的参考或直接存档。
*   **比例锁定**：自动计算宽高比，防止图案变形。

---

## 🛠️ 技术栈 (Tech Stack)

*   **GUI**: Python `tkinter` (原生轻量，无需庞大依赖)
*   **Core Vision**: `OpenCV` (cv2), `NumPy`
*   **Acceleration**: `Numba` (可选，推荐安装以获得极致性能)
*   **Image IO**: `Pillow` (PIL)

---

## 🚀 快速开始 (Quick Start)

### 1. 环境准备
确保你的 Python 环境已安装以下库：

```bash
pip install opencv-python numpy pillow numba
```
*(注：如果没有安装 numba，程序会自动降级运行，但处理速度会稍慢)*

### 2. 运行
直接运行主入口文件：

```bash
python main_gui.py
```

### 3. 使用指南
1.  **加载图片**：点击“选择图片”导入你想印在 PCB 上的 Logo 或插图。
2.  **设置尺寸**：
    *   **精度**：建议采用预设 `0.15` (对应大多数 PCB 板厂的丝印极限)。
    *   **物理尺寸**：输入你希望图案在板子上的实际高度（如 `80mm`）。
3.  **微调效果**：
    *   保持 **“抖动”** 勾选，以获得照片级质感。
    *   调整 **“描边”** 粗细以增强轮廓显著性。
4.  **生成**：点击“生成并保存”，即可获得一张完全符合生产标准的二值化 PNG 图片。
